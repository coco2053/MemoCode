<section id="articles">
    {% for article in articles|reverse %}
        <a data-target="{{ path('article_show', {'id': article.id}) }}" data-tooltip="Lire l'article" class="modal-trigger" href="#addModal">
            <div class="article">
                <figure class="thumbnail" style= {{"background-color:"~article.color}}>
                    {% for memo in article.memos %}
                        <div>{{ memo.language.name }}</div>
                    {% endfor %}
            </figure>

            <div class="info">
                <div class="date"><i id="calendar" class="fa fa-calendar-alt fa-md"></i>{{ article.createdAt | localizeddate('none', 'none', 'fr', null, 'MMMM Y') | upper}}</div>
                <h3>{{ article.title }}</h3>
                <div class="description">{{ article.description[:200] }}</div>
                </div>
            </div>
        </a>
    {% endfor %}
</section>
<script>
    $(function() {
        $('#addModal').on('show.bs.modal',
            function(e) {
            Prism.highlightAllUnder($('#modal-ajax')[0]);
        });
        $('.modal-trigger').click(function () {
            //On récupère l'url depuis la propriété "Data-target" de la balise html a
            url = $(this).attr('data-target');
            title = $(this).attr('data-tooltip');
            //on fait un appel ajax vers l'action symfony qui nous renvoie la vue
            $.get(url, function (data) {
                //on injecte le html dans la modale
                $('.modal-body').html(data);
                $('.modal-title').html(title);
                //On initialise les modales materialize
                $('#addModal').modal();
            });
        })
    });
</script>
